<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link th:href="@{/css/Secondary.css}" rel="stylesheet"/>
<link href="http://cdn.jsdelivr.net/webjars/bootstrap/3.2.0/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/3.2.0/css/bootstrap.min.css}" rel="stylesheet" media="screen" />
<script src="http://cdn.jsdelivr.net/webjars/jquery/2.1.1/jquery.min.js" th:src="@{/webjars/jquery/2.1.1/jquery.min.js}"></script>
<script src="http://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script th:src="@{/js/ajaxfunctions.js}" rel="stylesheet" type="text/javascript"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></link>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<head th:replace="fragments/header :: header"></head>
<body>
<script th:inline="javascript">
//<![CDATA[
function init() {
	var files = document.getElementById("dLabel");
	var XValues = document.getElementById("ValuesXplaceholder");
	var yValues = document.getElementById("ValuesYplaceholder");
	var filestable=[];
	
	var HEADERS=[];
	var VALUES=[];
	
	
	
	for(var i=0;i<files.length;i++){
		filestable.push(files.options[i].text);
	}
	
	var radioIDsX=[];
	var radioIDsY=[];
	for(var i=0; i<filestable.length;i++){
		 radioIDsX.push("DataRowXdatafor"+filestable[i]);
		 radioIDsY.push("DataRowYdatafor"+filestable[i]);
	}
	
	var XradioValues=[];
	var YradioValues=[];
	var indexesOfX=[];
	var indexesOfY=[];
	
	
	for(var i=0;i<filestable.length;i++){
		if(document.querySelector('input[name="'+radioIDsX[i]+'"]:checked')!=null){
			XradioValues.push( document.querySelector('input[name="'+radioIDsX[i]+'"]:checked').value);
			indexesOfX.push(i);
		}
		if(document.querySelector('input[name="'+radioIDsY[i]+'"]:checked')!=null){
			YradioValues.push(document.querySelector('input[name="'+radioIDsY[i]+'"]:checked').value);
			indexesOfY.push(i);
		}
	}
	
	var VALUES_Y=[];
	var indHead= objectsMap[indexesOfX[0]].HEADERS.indexOf(XradioValues[0]);
	var VALUES_X = objectsMap[indexesOfX[0]].VALUES[indHead+1];
	
	for(var i=0;i<indexesOfY.length;i++){
		var indHead= objectsMap[indexesOfY[i]].HEADERS.indexOf(YradioValues[i]);
		VALUES_Y.push(objectsMap[indexesOfY[i]].VALUES[indHead+1]);
	}
	
	var datatable = [];
	var finalResults=[];
	for(var i=0; i<VALUES_Y.length; i++) {
		var value = VALUES_Y[i];
			for(var j=0;j<value.length;j++){
				datatable.push({x: VALUES_X[j], y: value[j]});
			}
			finalResults.push(datatable);
			datatable = [];
    }
	var dps = []; 
	var chart = new CanvasJS.Chart("chartContainer",{
		zoomEnabled: true,
	    zoomType: "xy",
	    animationEnabled: true,
	    animationDuration: 2000,
	    exportEnabled: true,
		title :{
			text: "Chart Generated"
		},
		axisX: {						
			title: XradioValues[0]
		},
		legend:{
	        fontSize: 15
	    },
		axisY: {						
		},
		data: []
	});
	for(var z=0;z<finalResults.length;z++){
		chart.options.data.push({type: "line",showInLegend: true, legendText: YradioValues[z],dataPoints: finalResults[z]}); 
	}
	chart.render();
	
}


function changeInputXY(){
	var files = document.getElementById("dLabel");
	var strFile = files.options[files.selectedIndex].text;
	
	var currentToShow = strFile+"Y";
	for(var i=0;i<files.length;i++){
		document.getElementById(files.options[i].text+"Y").style.display = 'none';
		if((files.options[i].text+"Y")===(currentToShow)){
			document.getElementById(files.options[i].text+"Y").style.display = 'block';
		}
	}
	}
/*]]>*/
</script>

<div id="Form" align="center" class="container" >
	<form id="GetFilesForm" method="post" class="form-search">
	<div class="input-group">
	  <input id="GetFilesFormInput" type="text" name="filename" class="input-medium search-query form-control" placeholder="File name pattern"></input><span class="input-group-btn">
	  <button id="GetFilesFormButton" type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search</button> </span>
	  </div>
	</form>
</div>

<ul>
  <li>
    <input type="radio" id="f-option" name="selector"></input>
    <label for="f-option">Pizza</label>
    
    <div class="check"></div>
  </li>
  
  <li>
    <input type="radio" id="s-option" name="selector"></input>
    <label for="s-option">Bacon</label>
    
    <div class="check"><div class="inside"></div></div>
  </li>
  
  <li>
    <input type="radio" id="t-option" name="selector"></input>
    <label for="t-option">Cats</label>
    
    <div class="check"><div class="inside"></div></div>
  </li>
</ul>

<div>
	<form id="CommitFiles" method="post">
	<div class="row">
	 <div class="col-sm-1"></div>
	 
	    <div id="DropdownMenu" class="col-sm-1">
			<div class="dropdown">
				<select id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				</select>
			</div>
		</div>
		<div class="col-sm-1"></div>
	    <div id="ValuesXplaceholder" class="col-sm-3" style="background-color:lavender;">    
		    

	    </div>
	    <div class="col-sm-1"></div>
	    <div id="ValuesYplaceholder" class="col-sm-3" style="background-color:lavender;">    
		    

	    </div>
	    </div>

	</form>
</div>

<div style="display: none">
				<select id="XAsisSelection">
					
				</select>
</div>
<div style="display: none">
				<select id="YAsisSelection">
					
				</select>
</div>

<div align="center">
	<button onclick="init();" style="text-align: center;" type="button" value="GenerateChart" class="btn btn-primary">Generate Chart</button>
</div>
<div id="chartContainer" style="height: 300px; width: 100%;">
</div>

</body>
<div lang="en" th:replace="fragments/footer :: footer"></div>

<script th:inline="javascript">
//<![CDATA[
document.getElementById("dLabel").addEventListener("change", changeInputXY);
/*]]>*/
</script>

</html>